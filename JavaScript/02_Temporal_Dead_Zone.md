# TDZ(Temporal Dead Zone)

일시적 사각지대

JavaScript의 '호이스팅' 개념부터 숙지하고..

일시적인 사각지대라는 게 뭘까요?

>scope의 시작 지점부터 초기화 시작 지점까지의 구간을 TDZ라고 한다.

JavaScript에서 변수는 (1)선언, (2)초기화, (3)할당 이라는 세 가지 단계에 걸쳐서 생성된다.

- 선언 단계(Declaration phase): 변수를 실행 컨텍스트의 변수 객체에 등록하는 단계. 이 변수 객체는 스코프가 참조하는 대상이 된다.
- 초기화 단계(Initialization phase): 실행 컨텍스트에 존재하는 변수 객체에 선언 단계의 변수를 위한 메모리를 만드는 단계. 이 단계에서 할당된 메모리에는 `undefined`로 초기화된다.
- 할당 단계(Assignment phase): 사용자가 undefined로 초기화 된 메모리에 다른 값을 할당하는 단계.

여태까지 그냥 사용해왔던 var, let, const는 사실 위의 세 단계를 거쳐서 생성되는 것이었다!!

그리고 충격적이게도, var와 let/const의 차이는 이 세 단계의 순서에 차이가 존재한다는 점이라고 한다.

- `var`: 변수 선언 전에 선언 단계와 초기화 단계를 동시에 진행. 그래서 JavaScript는 실행 컨텍스트 변수 객체에 변수를 등록하고, 메모리를 undefined로 만들어 버린다.
- `let`: var와는 다르게, 초기화 선언과 초기화가 분리되어 진행. 따라서 실행 컨텍스트에 변수를 등록했지만, 메모리가 할당되지 않아 접근할 수 없어 ReferenceError가 발생하는 것. 이것을 보고 "호이스팅이 되지 않네?"하고 오해할 수 있다.

다시 확인해 보자..

>TDZ는 scope의 시작 지점부터 초기화 시작 지점까지의 구간을 말한다.

즉, let/const 또한 선언 전 실행 컨텍스트 변수 객체에 등록이 되어 호이스팅이 되지만, 이 TDZ 구간에 의해 메모리가 할당이 되질 않아 ReferenceError가 발생하는 것이다.

scope에 진입할 때 변수를 만들고, TDZ가 생성되지만.. 코드 실행(= 실행 컨텍스트)이 변수가 있는 실제 위치에 도달할 때까지 엑세스를 못 할 뿐이다.

## ※ Execution Context

실행 컨텍스트란, **실행할 코드에 제공할 환경 정보들을 모아놓은 객체**를 말한다. JavaScript는 동일한 환경에 있는 환경 정보들을 모은 실행 컨텍스트를 call stack에 쌓아올린 후 실행함으로써 **코드의 환경과 순서를 보장**할 수 있게 된다.

실행 컨텍스트가 콜 스택의 맨 위에 쌓이는 순간이 곧 현재 실행될 코드에 관여하게 되는 시점이다. 어떤 실행 컨텍스트가 활성화 될 때, JavaScript 엔진은 해당 컨텍스트와 관련된 코드들을 실행하는 데 필요한 환경 정보들을 수집해서, 실행 컨텍스트 객체에 저장한다.

실행 컨텍스트 객체가 활성화되는 시점에 수집하는 정보는 다음 세 가지가 있다.

- VariableEnvironment
- LexicalEnvironment
- thisBinding
